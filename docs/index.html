<!DOCTYPE html>
<html lang="sr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TaÄnije Vremenske Prognoze za Budvu â€“ Matija IvanoviÄ‡</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
            font-weight: 400;
            font-size: 18px;
            line-height: 1.6;
            color: #24292e;
            background: #ffffff;
            max-width: 680px;
            margin: 0 auto;
            padding: 60px 20px;
        }

        h1 {
            font-size: 40px;
            font-weight: 600;
            margin-bottom: 12px;
            line-height: 1.25;
            color: #24292e;
        }

        h2 {
            font-size: 30px;
            font-weight: 600;
            margin-top: 50px;
            margin-bottom: 18px;
            line-height: 1.25;
            color: #24292e;
        }

        h3 {
            font-size: 22px;
            font-weight: 600;
            margin-top: 35px;
            margin-bottom: 14px;
            color: #24292e;
        }

        p {
            margin-bottom: 18px;
            color: #24292e;
        }

        a {
            color: #0366d6;
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        .date {
            color: #586069;
            font-size: 16px;
            margin-bottom: 40px;
        }

        img {
            max-width: 100%;
            height: auto;
            margin: 30px 0;
            display: block;
            border-radius: 3px;
        }

        code {
            background: #f6f8fa;
            padding: 3px 6px;
            border-radius: 3px;
            font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace;
            font-size: 0.9em;
        }

        ul, ol {
            margin-left: 28px;
            margin-bottom: 18px;
        }

        li {
            margin-bottom: 6px;
        }

        table {
            width: 100%;
            margin: 28px 0;
            border-collapse: collapse;
            font-size: 16px;
        }

        th {
            text-align: left;
            padding: 10px;
            border-bottom: 2px solid #e1e4e8;
            font-weight: 600;
        }

        td {
            padding: 10px;
            border-bottom: 1px solid #e1e4e8;
        }

        tr:last-child td {
            border-bottom: none;
        }

        .note {
            background: #f6f8fa;
            border-left: 3px solid #586069;
            padding: 15px 20px;
            margin: 28px 0;
            font-size: 16px;
        }

        .site-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 60px;
            padding-bottom: 20px;
            border-bottom: 1px solid #e1e4e8;
            font-size: 15px;
        }

        .site-header a {
            color: #586069;
            text-decoration: none;
        }

        .site-header a:hover {
            color: #24292e;
        }

        .site-header .site-name {
            font-weight: 600;
            color: #24292e;
        }

        .site-header nav a {
            margin-left: 20px;
        }

        @media (max-width: 680px) {
            body {
                font-size: 16px;
                padding: 40px 16px;
            }

            h1 {
                font-size: 32px;
            }

            h2 {
                font-size: 26px;
            }

            h3 {
                font-size: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="site-header">
        <a href="/" class="site-name">Matija IvanoviÄ‡</a>
        <nav>
            <a href="forecast.html" style="color:#0366d6;font-weight:600;">Live Prognoza</a>
            <a href="https://matko-iv.github.io/blog/">Blog</a>
            <a href="https://github.com/matko-iv/vrijeme" target="_blank">GitHub</a>
            <a href="mailto:ivanovicmatija2007@gmail.com">Kontakt</a>
        </nav>
    </div>

    <p class="date">Februar 2026 (aÅ¾urirano)</p>
    <h1>TaÄnije Vremenske Prognoze za Budvu</h1>

    <div class="note" style="background:#e8f4fd;border-left-color:#0366d6;margin-bottom:30px;">
        Korigovana prognoza za narednih 48 sati sa interaktivnim grafovima i satnim detaljima je dostupna na <a href="forecast.html"><strong>stranici za live prognozu</strong></a>.
    </div>

    <p>Globalni i kontinentalni meteoroloÅ¡ki modeli â€” ECMWF, GFS, ICON, MÃ©tÃ©o-France, UKMO, BOM â€” simuliraju kompletnu atmosferu i daju prognoze za cijelu planetu. Nevjerovatno su sofisticirani, ali nijedan od njih nije optimizovan za jednu taÄku na karti. Svaki pravi sistematske greÅ¡ke koje su specifiÄne za lokalnu geografiju: blizinu mora, okolne planine, dominantne vjetrove.</p>

    <p>Budva je savrÅ¡en primjer. U ovom projektu sam uzeo <strong>6 godina satnih podataka</strong> sa meteo stanice u Budvi (<strong>50.000+ mjerenja</strong>, od aprila 2020. do danas), uporedio ih sa prognozama <strong>8 globalnih modela</strong>, i trenirao XGBoost model koji sistematski ispravlja njihove greÅ¡ke. Rezultat: <strong>temperatura taÄnija za 25%</strong>, <strong>vjetar za 62%</strong>, <strong>pritisak za 68%</strong> â€” mjereno na podacima koje model nikad nije vidio.</p>

    <h2>Problem</h2>

    <p>Globalni meteoroloÅ¡ki modeli kao Å¡to su ECMWF, GFS ili ICON pokrivaju cijelu planetu i izvrsno rade posao na velikom nivou. MeÄ‘utim, lokalna geografija, blizina mora, i specifiÄnosti Budve stvaraju uslove koje globalni modeli ne mogu savrÅ¡eno uhvatiti.</p>

    <p>Uzeo sam 8 razliÄitih globalnih modela (ECMWF IFS025, ICON Seamless, GFS Seamless, MeteoFrance, ARPEGE Europe, ItaliaMeteo ICON2I, <strong>UK Met Office (UKMO)</strong> i <strong>Bureau of Meteorology ACCESS (BOM)</strong>) i uporedio njihove prognoze sa stvarnim mjerenjima sa meteo stanice u Budvi tokom posljednjih 6 godina. Podatke sam spojio iz dva izvora â€” stanica ibudva5 (od februara 2023.) i Å¡iri all_data set (od aprila 2020.) â€” Å¡to mi je dalo preko <strong>50,000 satnih taÄaka podataka po modelu</strong>, dvostruko viÅ¡e nego u prvoj verziji.</p>

    <h2>Metodologija</h2>

    <h3>Mean Absolute Error (MAE)</h3>

    <p>NajvaÅ¾nija metrika koju koristim je Mean Absolute Error (MAE) â€” srednja apsolutna greÅ¡ka. MAE mjeri prosjeÄnu veliÄinu greÅ¡aka u skupu prognoza, bez obzira na njihov smjer. Za svako satno mjerenje, uzimam razliku izmeÄ‘u prognozirane i stvarne vrijednosti, uzmem apsolutnu vrijednost te razlike, i na kraju prosjek svih tih apsolutnih razlika daje MAE:</p>

    <img src="https://latex.codecogs.com/svg.image?MAE=\frac{1}{n}\sum_{i=1}^{n}|y_{pred}-y_{true}|" alt="MAE formula">

    <p>Na primjer, ako model prognozira temperature od 20Â°C, 22Â°C i 18Â°C, a stvarne temperature su 19Â°C, 24Â°C i 17Â°C, onda su apsolutne greÅ¡ke 1Â°C, 2Â°C i 1Â°C, pa je MAE = (1+2+1)/3 = 1.33Â°C.</p>

    <p>MAE je intuitivan jer se izraÅ¾ava u istim jedinicama kao i originalni podaci (stepeni Celzijusa za temperaturu, m/s za vjetar). Ako je MAE za temperaturu 1.5Â°C, to bukvalno znaÄi da u prosjeku prognoza promaÅ¡uje za 1.5 stepeni. Niska vrijednost MAE ukazuje na preciznije prognoze. JoÅ¡ jedna prednost MAE-a je da tretira sve greÅ¡ke linearno â€” greÅ¡ka od 5Â°C je taÄno pet puta â€gora" od greÅ¡ke od 1Â°C, Å¡to ga Äini robusnim na pojedinaÄne ekstremne promaÅ¡aje.</p>

    <h3>Mean Squared Error (MSE) i Root Mean Squared Error (RMSE)</h3>

    <p>Druga veoma korisna metrika je Mean Squared Error (MSE) â€” srednja kvadratna greÅ¡ka. Za razliku od MAE koji uzima apsolutne vrijednosti, MSE kvadrira svaku pojedinaÄnu greÅ¡ku prije prosjeka:</p>

    <img src="https://latex.codecogs.com/svg.image?MSE=\frac{1}{n}\sum_{i=1}^{n}(y_{pred}-y_{true})^2" alt="MSE formula">

    <p>Kvadriranje ima vaÅ¾nu posljedicu: veÄ‡e greÅ¡ke se kaÅ¾njavaju neproporcijalno viÅ¡e. GreÅ¡ka od 5Â°C doprinosi sa 25 jedinica, dok greÅ¡ka od 1Â°C doprinosi samo sa 1 jedinicom â€” dakle pet puta veÄ‡a greÅ¡ka u apsolutnom smislu daje 25 puta veÄ‡i doprinos u MSE. To znaÄi da je MSE posebno osjetljiv na â€velike promaÅ¡aje" â€” ako model povremeno napravi veliku greÅ¡ku, MSE Ä‡e to snaÅ¾no reflektovati, Äak i ako je veÄ‡ina prognoza taÄna.</p>

    <p>PoÅ¡to MSE daje rezultat u kvadriranim jedinicama (Â°CÂ²), Äesto se koristi korijen iz MSE â€” Root Mean Squared Error (RMSE) â€” koji vraÄ‡a metriku u originalne jedinice:</p>

    <img src="https://latex.codecogs.com/svg.image?RMSE=\sqrt{\frac{1}{n}\sum_{i=1}^{n}(y_{pred}-y_{true})^2}" alt="RMSE formula">

    <p>RMSE je uvijek veÄ‡i ili jednak MAE. Razlika izmeÄ‘u RMSE i MAE govori o varijabilnosti greÅ¡aka: ako su RMSE i MAE sliÄni, to znaÄi da su greÅ¡ke uglavnom konstantne veliÄine. Ako je RMSE znaÄajno veÄ‡i od MAE, to ukazuje da postoje i neke velike greÅ¡ke pored manjih.</p>

    <img src="images/07_mae_vs_rmse.png" alt="PoreÄ‘enje MAE i RMSE za sve modele">

    <h3>Bias (sistematska greÅ¡ka)</h3>

    <p>TakoÄ‘e sam raÄunao bias (sistematsku greÅ¡ku):</p>

    <img src="https://latex.codecogs.com/svg.image?Bias=\frac{1}{n}\sum_{i=1}^{n}(y_{pred}-y_{true})" alt="Bias formula">

    <p>Pozitivan bias znaÄi da model pregrijava, negativan da pothlaÄ‘uje. Za razliku od MAE i MSE, bias ne koristi apsolutne vrijednosti niti kvadrate â€” pozitivne i negativne greÅ¡ke se meÄ‘usobno poniÅ¡tavaju. To Äini bias korisnim za otkrivanje sistematskih tendencija: model sa bias-om od -0.9Â°C konzistentno predviÄ‘a niÅ¾u temperaturu od stvarne.</p>

    <h2>Rezultati</h2>

    <p>Analiza je potvrdila moje sumnje. Evo Å¡ta sam otkrio:</p>

    <table>
        <thead>
            <tr>
                <th>Model</th>
                <th>MAE Temp (Â°C)</th>
                <th>Bias (Â°C)</th>
                <th>n (sati)</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>MeteoFrance</td>
                <td>1.37</td>
                <td>-0.53</td>
                <td>27,582</td>
            </tr>
            <tr>
                <td>ARPEGE Europe</td>
                <td>1.38</td>
                <td>-0.53</td>
                <td>27,552</td>
            </tr>
            <tr>
                <td>ItaliaMeteo ICON2I</td>
                <td>1.69</td>
                <td>+0.86</td>
                <td>6,876</td>
            </tr>
            <tr>
                <td>UKMO Seamless</td>
                <td>1.72</td>
                <td>-1.29</td>
                <td>33,437</td>
            </tr>
            <tr>
                <td>GFS Seamless</td>
                <td>1.74</td>
                <td>-1.13</td>
                <td>41,216</td>
            </tr>
            <tr>
                <td>BOM ACCESS</td>
                <td>1.78</td>
                <td>-1.07</td>
                <td>12,532</td>
            </tr>
            <tr>
                <td>ECMWF IFS025</td>
                <td>1.81</td>
                <td>-0.80</td>
                <td>17,073</td>
            </tr>
            <tr>
                <td>ICON Seamless</td>
                <td>1.91</td>
                <td>+0.81</td>
                <td>27,446</td>
            </tr>
        </tbody>
    </table>

    <div class="note">
        <strong>Napomena:</strong> Tabela je sortirana po MAE za temperaturu (niÅ¾i = bolji). Svi modeli su analizirani na 6 godina podataka (2020-2026), ali imaju razliÄit broj sati (n) jer nisu svi modeli bili dostupni u cijelom periodu. UKMO je 4. najbolji za temperaturu, a BOM ima najmanji dewpoint bias.
    </div>

    <h3>Detaljno po varijablama</h3>

    <p>Temperatura nije jedina stvar koja se prognozira. Evo kako se modeli ponaÅ¡aju na <strong>svim kljuÄnim varijablama</strong>:</p>

    <details>
    <summary><strong>Brzina vjetra (m/s)</strong> â€” ECMWF dominira</summary>
    <table>
        <tr><th>Model</th><th>MAE</th><th>Bias</th><th>n</th></tr>
        <tr><td><strong>ECMWF IFS025</strong></td><td><strong>0.72</strong></td><td>+0.28</td><td>16,629</td></tr>
        <tr><td>UKMO Seamless</td><td>0.95</td><td>+0.80</td><td>32,795</td></tr>
        <tr><td>ICON Seamless</td><td>1.25</td><td>+1.17</td><td>26,802</td></tr>
        <tr><td>ItaliaMeteo ICON2I</td><td>1.36</td><td>+1.20</td><td>6,721</td></tr>
        <tr><td>GFS Seamless</td><td>1.48</td><td>+1.40</td><td>40,574</td></tr>
        <tr><td>ARPEGE Europe</td><td>1.61</td><td>+1.52</td><td>26,915</td></tr>
        <tr><td>MeteoFrance</td><td>1.61</td><td>+1.52</td><td>26,942</td></tr>
        <tr><td>BOM ACCESS</td><td>1.69</td><td>+1.61</td><td>12,187</td></tr>
    </table>
    <p><em>Svi modeli precjenjuju vjetar (pozitivan bias). ECMWF je duplo bolji od ostalih.</em></p>
    </details>

    <details>
    <summary><strong>VlaÅ¾nost (%)</strong> â€” ECMWF i BOM najbolji</summary>
    <table>
        <tr><th>Model</th><th>MAE</th><th>Bias</th><th>n</th></tr>
        <tr><td><strong>ECMWF IFS025</strong></td><td><strong>9.05</strong></td><td>-1.59</td><td>16,465</td></tr>
        <tr><td>BOM ACCESS</td><td>9.61</td><td>+3.02</td><td>12,532</td></tr>
        <tr><td>UKMO Seamless</td><td>9.98</td><td>+3.50</td><td>33,432</td></tr>
        <tr><td>GFS Seamless</td><td>10.37</td><td>-1.76</td><td>41,216</td></tr>
        <tr><td>MeteoFrance</td><td>11.16</td><td>-1.79</td><td>27,582</td></tr>
        <tr><td>ARPEGE Europe</td><td>11.16</td><td>-1.78</td><td>27,552</td></tr>
        <tr><td>ICON Seamless</td><td>13.04</td><td>-9.27</td><td>27,446</td></tr>
        <tr><td>ItaliaMeteo ICON2I</td><td>14.27</td><td>-11.34</td><td>6,876</td></tr>
    </table>
    <p><em>ICON i ItaliaMeteo drastiÄno podcjenjuju vlaÅ¾nost (bias -9 do -11%). ECMWF je najprecizniji.</em></p>
    </details>

    <details>
    <summary><strong>Padavine (mm)</strong> â€” GFS mnogo bolji od ostalih</summary>
    <table>
        <tr><th>Model</th><th>MAE</th><th>Bias</th><th>n</th></tr>
        <tr><td><strong>GFS Seamless</strong></td><td><strong>3.73</strong></td><td>-3.59</td><td>22,363</td></tr>
        <tr><td>UKMO Seamless</td><td>4.72</td><td>-4.34</td><td>14,582</td></tr>
        <tr><td>ARPEGE Europe</td><td>7.20</td><td>-6.86</td><td>8,719</td></tr>
        <tr><td>MeteoFrance</td><td>7.22</td><td>-6.88</td><td>8,735</td></tr>
        <tr><td>ICON Seamless</td><td>7.33</td><td>-6.87</td><td>8,592</td></tr>
        <tr><td>ItaliaMeteo ICON2I</td><td>7.51</td><td>-7.04</td><td>2,112</td></tr>
        <tr><td>BOM ACCESS</td><td>8.00</td><td>-6.83</td><td>2,893</td></tr>
        <tr><td>ECMWF IFS025</td><td>8.02</td><td>-7.77</td><td>4,624</td></tr>
    </table>
    <p><em>Svi modeli podcjenjuju padavine (negativan bias). GFS je dvostruko bolji od veÄ‡ine.</em></p>
    </details>

    <details>
    <summary><strong>Pritisak (hPa)</strong> â€” ItaliaMeteo iznenaÄ‘uje</summary>
    <table>
        <tr><th>Model</th><th>MAE</th><th>Bias</th><th>n</th></tr>
        <tr><td><strong>ItaliaMeteo ICON2I</strong></td><td><strong>0.68</strong></td><td>+0.58</td><td>6,979</td></tr>
        <tr><td>BOM ACCESS</td><td>1.00</td><td>+0.87</td><td>12,593</td></tr>
        <tr><td>MeteoFrance</td><td>1.09</td><td>+1.08</td><td>27,791</td></tr>
        <tr><td>ARPEGE Europe</td><td>1.09</td><td>+1.08</td><td>27,761</td></tr>
        <tr><td>ICON Seamless</td><td>1.14</td><td>+1.13</td><td>27,626</td></tr>
        <tr><td>ECMWF IFS025</td><td>1.32</td><td>+1.31</td><td>17,208</td></tr>
        <tr><td>UKMO Seamless</td><td>1.87</td><td>+1.85</td><td>33,643</td></tr>
        <tr><td>GFS Seamless</td><td>2.75</td><td>+2.73</td><td>41,426</td></tr>
    </table>
    <p><em>Svi modeli precjenjuju pritisak. ItaliaMeteo (ICON-D2 na 2km!) je najbolji zahvaljujuÄ‡i visokoj rezoluciji.</em></p>
    </details>

    <details>
    <summary><strong>TaÄka rose, udari vjetra, solarna radijacija</strong></summary>
    <p><strong>TaÄka rose:</strong> BOM ACCESS je najprecizniji (MAE 1.87Â°C), slijedi UKMO (1.92Â°C) i ECMWF (1.92Â°C).</p>
    <p><strong>Udari vjetra:</strong> GFS je neoÄekivano dominantan (MAE 1.78 m/s), dok ICON ima MAE od 5.54 m/s â€” trostruko gori.</p>
    <p><strong>Solarna radijacija:</strong> ItaliaMeteo je najbolji (MAE 42.4 W/mÂ²). GFS i BOM su najloÅ¡iji (~65 W/mÂ²).</p>
    </details>

    <img src="images/01_model_performance_overview.png" alt="Pregled performansi modela">

    <p>Nekoliko stvari je oÄito. Prvo, veÄ‡ina modela ima negativan bias za temperaturu - Å¡to znaÄi da sistematski pothlaÄ‘uju Budvu za pola stepena ili viÅ¡e. Samo ICON ima pozitivan bias (pregrijava). Drugo, greÅ¡ke nisu uniforme tokom cijele godine. Zimi su veÄ‡e nego ljeti.</p>

    <img src="images/02_systematic_bias.png" alt="Sistematski bias temperature i vjetra">

    <img src="images/06_model_comparison_matrix.png" alt="Matrica poreÄ‘enja modela">

    <p>Posebno me je zanimala bura. Definisao sam je kao vjetar brzine preko 8 m/s iz smjera izmeÄ‘u 315Â° i 45Â°. Tokom bure, modeli imaju znaÄajno veÄ‡e greÅ¡ke nego inaÄe.</p>

    <img src="images/03_seasonal_analysis.png" alt="Sezonska analiza greÅ¡aka">

    <h2>Sezonski obrasci</h2>

    <p>GreÅ¡ke se znaÄajno razlikuju po sezonama. Ljeti su najveÄ‡e, Å¡to je vjerovatno zbog intenzivnijih konvektivnih procesa i lokalne cirkulacije zbog mora.</p>

    <img src="images/08_bias_heatmap.png" alt="Heatmapa sezonskog biasa">

    <img src="images/04_diurnal_cycle.png" alt="Dnevni ciklus greÅ¡aka">

    <img src="images/09_weather_condition_comparison.png" alt="PoreÄ‘enje po vremenskim uslovima">

    <h2>Dodatna analiza</h2>

    <p>Pored osnovnih metrika, analizirao sam i sposobnost modela da predviÄ‘aju oblaÄnost i padavine â€” dva parametra koja su tradicionalno teÅ¡ka za prognozu na lokalnom nivou.</p>

    <img src="images/12_cloudiness_skill.png" alt="VjeÅ¡tina predviÄ‘anja oblaÄnosti">

    <img src="images/10_precipitation_intensity.png" alt="Intenzitet padavina">

    <p>Radar grafik ispod prikazuje performanse svakog modela na svim analiziranim varijablama â€” temperatura, brzina vjetra, padavine, oblaÄnost â€” dajuÄ‡i kompletnu sliku prednosti i slabosti svakog modela.</p>

    <img src="images/11_radar_all_variables.png" alt="Radar grafik svih varijabli">

    <h2>Kako to popraviti</h2>

    <p>Ideja je da treniram model maÅ¡inskog uÄenja (konkretno XGBoost) koji Ä‡e nauÄiti iz greÅ¡aka koje globalni modeli prave. Model uzima sirove prognoze kao input i daje korigovanu prognozu kao output. Sada imam <strong>8 modela</strong> umjesto ranijih 4â€”6, ukljuÄujuÄ‡i UK Met Office (UKMO) i Australian BOM ACCESS, Å¡to daje bogatiji i raznovrsniji ansambl.</p>

    <p>KljuÄno je kreirati dobre feature-e. Pored sirovih prognoza, dodajem:</p>

    <ul>
        <li>Ensemble statistike â€” prosjek, standardna devijacija, raspon i medijana prognoza svih <strong>8 modela</strong></li>
        <li>Devijacije â€” koliko svaki model odstupa od ensemble prosjeka</li>
        <li>CikliÄne varijable â€” sat u danu i dan u godini kao sin/cos funkcije</li>
        <li>Sezonski faktori â€” zima/proljeÄ‡e/ljeto/jesen</li>
        <li>Cross-parameter interakcije â€” razlika temp/dew point, odnos vjetra i pritiska</li>
        <li><strong>Tabele istorijskog biasa</strong> â€” prosjeÄna greÅ¡ka svakog modela za svaki parametar, po mjesecu i satu (sada 384+ lookup features za 8 modela)</li>
        <li><strong>Clear-sky model</strong> â€” teoretska solarna radijacija za Budvu (42.29Â°N, 18.84Â°E) kao proxy za dnevne cikluse</li>
        <li><strong>Pametna korekcija vremenskog koda</strong> (novo) â€” XGBoost koriguje padavine i oblaÄnost nezavisno, a zatim se weather code odreÄ‘uje na osnovu tih korekcija umjesto sirovih modela (viÅ¡e o tome ispod)</li>
    </ul>

    <p>Loss funkcija koju minimiziram je isto Mean Absolute Error:</p>

    <img src="https://latex.codecogs.com/svg.image?L=\frac{1}{n}\sum_{i=1}^{n}|f(x_i)-y_i|" alt="Loss function">

    <p>Cilj je bio spustiti MAE ispod 1.0Â°C â€” <strong>postignut: 0.97Â°C</strong>. To je poboljÅ¡anje od 24.3% u odnosu na najbolji globalni model (ARPÃˆGE Europe). Sa integracijom Previous Runs revizija, model koristi 1,006 feature-a iz 8 modela + 6 godina podataka.</p>

    <h2>Kako XGBoost funkcioniÅ¡e</h2>

    <p>XGBoost (eXtreme Gradient Boosting) je algoritam maÅ¡inskog uÄenja baziran na ansamblu stabala odluÄivanja. Za razliku od klasiÄnog random foresta koji trenira stabla nezavisno, XGBoost ih gradi <em>sekvencijalno</em> â€” svako novo stablo pokuÅ¡ava ispraviti greÅ¡ke prethodnih.</p>

    <h3>Osnovna ideja: aditivno treniranje</h3>

    <p>Model se gradi iterativno. KonaÄna predikcija je suma predikcija svih stabala:</p>

    <img src="https://latex.codecogs.com/svg.image?\hat{y}_i=\sum_{k=1}^{K}f_k(x_i),\quad%20f_k\in\mathcal{F}" alt="XGBoost prediction formula" style="margin: 20px auto; display: block;">

    <p>gdje je <em>K</em> broj stabala, <em>f<sub>k</sub></em> je predikcija k-tog stabla, a <em>F</em> je prostor svih moguÄ‡ih stabala odluÄivanja (CART stabla).</p>

    <p>U svakoj iteraciji <em>t</em>, dodajemo novo stablo <em>f<sub>t</sub></em> koje minimizira greÅ¡ku. Predikcija nakon <em>t</em> koraka:</p>

    <img src="https://latex.codecogs.com/svg.image?\hat{y}_i^{(t)}=\hat{y}_i^{(t-1)}+\eta\cdot%20f_t(x_i)" alt="Additive training" style="margin: 20px auto; display: block;">

    <p>gdje je Î· (eta) <strong>learning rate</strong> â€” hiperparametar koji kontroliÅ¡e koliko jako svako novo stablo utiÄe na konaÄni rezultat. Manji Î· znaÄi sporije uÄenje ali bolju generalizaciju.</p>

    <h3>Objektivna funkcija</h3>

    <p>XGBoost minimizira regularizovanu objektivnu funkciju:</p>

    <img src="https://latex.codecogs.com/svg.image?\mathcal{L}=\sum_{i=1}^{n}\ell(\hat{y}_i,y_i)+\sum_{k=1}^{K}\Omega(f_k)" alt="Objective function" style="margin: 20px auto; display: block;">

    <p>Prvi dio je <strong>loss funkcija</strong> (u naÅ¡em sluÄaju MAE), a drugi dio je <strong>regularizacija</strong> koja penalizuje kompleksnost stabala:</p>

    <img src="https://latex.codecogs.com/svg.image?\Omega(f)=\gamma%20T+\frac{1}{2}\lambda\sum_{j=1}^{T}w_j^2+\alpha\sum_{j=1}^{T}|w_j|" alt="Regularization term" style="margin: 20px auto; display: block;">

    <p>gdje je <em>T</em> broj listova u stablu, <em>w<sub>j</sub></em> su teÅ¾ine (vrijednosti) u listovima, Î³ je penalizacija za broj listova, Î» je L2 regularizacija, a Î± je L1 regularizacija. Ova regularizacija spreÄava overfitting i razlikuje XGBoost od klasiÄnog gradient boostinga.</p>

    <h3>Aproksimacija drugog reda</h3>

    <p>KljuÄna inovacija XGBoost-a je koriÅ¡tenje Taylor ekspanzije drugog reda za loss funkciju. U koraku <em>t</em>:</p>

    <img src="https://latex.codecogs.com/svg.image?\mathcal{L}^{(t)}\approx\sum_{i=1}^{n}\left[g_i%20f_t(x_i)+\frac{1}{2}h_i%20f_t^2(x_i)\right]+\Omega(f_t)" alt="Second order approximation" style="margin: 20px auto; display: block;">

    <p>gdje su:</p>

    <img src="https://latex.codecogs.com/svg.image?g_i=\frac{\partial\ell(\hat{y}_i^{(t-1)},y_i)}{\partial\hat{y}_i^{(t-1)}},\quad%20h_i=\frac{\partial^2\ell(\hat{y}_i^{(t-1)},y_i)}{\partial(\hat{y}_i^{(t-1)})^2}" alt="Gradients" style="margin: 20px auto; display: block;">

    <p><em>g<sub>i</sub></em> je prvi izvod (gradijent), a <em>h<sub>i</sub></em> drugi izvod (hesijan) loss funkcije. Ovo je ono Å¡to daje "Gradient" u imenu â€” svako novo stablo se uklapa na gradijente greÅ¡aka prethodnih stabala.</p>

    <h3>Optimalna teÅ¾ina listova</h3>

    <p>Za dato stablo sa strukturom <em>q</em>, optimalna teÅ¾ina u svakom listu <em>j</em> je:</p>

    <img src="https://latex.codecogs.com/svg.image?w_j^*=-\frac{\sum_{i\in%20I_j}g_i}{\sum_{i\in%20I_j}h_i+\lambda}" alt="Optimal leaf weight" style="margin: 20px auto; display: block;">

    <p>a odgovarajuÄ‡a optimalna vrijednost loss funkcije:</p>

    <img src="https://latex.codecogs.com/svg.image?\mathcal{L}^*=-\frac{1}{2}\sum_{j=1}^{T}\frac{(\sum_{i\in%20I_j}g_i)^2}{\sum_{i\in%20I_j}h_i+\lambda}+\gamma%20T" alt="Optimal loss" style="margin: 20px auto; display: block;">

    <p>gdje je <em>I<sub>j</sub></em> skup podataka koji pripada listu <em>j</em>.</p>

    <h3>Kako se stablo dijeli (Split Gain)</h3>

    <p>Prilikom gradnje svakog stabla, XGBoost bira optimalni split evaluirajuÄ‡i <strong>gain</strong> za svako moguÄ‡e dijeljenje:</p>

    <img src="https://latex.codecogs.com/svg.image?Gain=\frac{1}{2}\left[\frac{(\sum_{i\in%20I_L}g_i)^2}{\sum_{i\in%20I_L}h_i+\lambda}+\frac{(\sum_{i\in%20I_R}g_i)^2}{\sum_{i\in%20I_R}h_i+\lambda}-\frac{(\sum_{i\in%20I}g_i)^2}{\sum_{i\in%20I}h_i+\lambda}\right]-\gamma" alt="Split gain formula" style="margin: 20px auto; display: block;">

    <p>Tri Älana su: score lijevog djeteta + score desnog djeteta âˆ’ score bez dijeljenja. Oduzimamo Î³ kao penalizaciju za dodavanje novog lista. Split se pravi samo ako je gain pozitivan.</p>

    <h3>NaÅ¡a konfiguracija</h3>

    <p>Za korekciju vremenskih prognoza koristim sljedeÄ‡e hiperparametre:</p>

    <table>
        <tr><th>Parametar</th><th>Vrijednost</th><th>ZnaÄenje</th></tr>
        <tr><td><code>n_estimators</code></td><td>800</td><td>Maksimalan broj stabala (sa early stopping)</td></tr>
        <tr><td><code>max_depth</code></td><td>6</td><td>Maksimalna dubina svakog stabla</td></tr>
        <tr><td><code>learning_rate</code> (Î·)</td><td>0.05</td><td>Koliko jako svako novo stablo utiÄe</td></tr>
        <tr><td><code>subsample</code></td><td>0.8</td><td>Procenat podataka koriÅ¡ten za svako stablo</td></tr>
        <tr><td><code>colsample_bytree</code></td><td>0.7</td><td>Procenat feature-a koriÅ¡ten za svako stablo</td></tr>
        <tr><td><code>reg_alpha</code> (Î±)</td><td>0.1</td><td>L1 regularizacija (LASSO)</td></tr>
        <tr><td><code>reg_lambda</code> (Î»)</td><td>1.0</td><td>L2 regularizacija (Ridge)</td></tr>
        <tr><td><code>min_child_weight</code></td><td>5</td><td>Minimalni zbroj hesijana u listu</td></tr>
    </table>

    <p>Treniram poseban model za svaki parametar (temperatura, pritisak, vlaÅ¾nost, vjetar, taÄka rose, udari vjetra, oblaÄnost, padavine, solarna radijacija), koristeÄ‡i prognoze svih <strong>8 modela</strong> kao input. Sa 6 godina podataka i train/test splitom na jul 2025., rezultati su:</p>

    <table>
        <tr><th>Parametar</th><th>XGBoost MAE</th><th>Najbolji model MAE</th><th>PoboljÅ¡anje</th></tr>
        <tr><td>Temperatura</td><td><strong>0.97Â°C</strong></td><td>1.28Â°C (ARPÃˆGE)</td><td style="color:#28a745">+24.3%</td></tr>
        <tr><td>TaÄka rose</td><td><strong>1.17Â°C</strong></td><td>2.13Â°C (ECMWF)</td><td style="color:#28a745">+45.3%</td></tr>
        <tr><td>VlaÅ¾nost</td><td><strong>6.37%</strong></td><td>9.03% (ECMWF)</td><td style="color:#28a745">+29.5%</td></tr>
        <tr><td>Brzina vjetra</td><td><strong>0.45 m/s</strong></td><td>0.72 m/s (ECMWF)</td><td style="color:#28a745">+36.7%</td></tr>
        <tr><td>Udari vjetra</td><td><strong>0.60 m/s</strong></td><td>1.80 m/s (GFS)</td><td style="color:#28a745">+66.6%</td></tr>
        <tr><td>Pritisak</td><td><strong>0.36 hPa</strong></td><td>0.70 hPa (ItaliaMeteo)</td><td style="color:#28a745">+49.0%</td></tr>
        <tr style="background:#f0f9ff;"><td><strong>OblaÄnost</strong> â˜ï¸</td><td><strong>9.89%</strong></td><td>27.39% (BOM)</td><td style="color:#28a745">+63.9%</td></tr>
        <tr style="background:#f0f9ff;"><td><strong>Padavine</strong> ğŸŒ§ï¸</td><td><strong>1.61 mm</strong></td><td>1.52 mm (GFS)</td><td style="color:#d73a49">-6.2%</td></tr>
        <tr style="background:#f0f9ff;"><td><strong>Solar. radijacija</strong> â˜€ï¸</td><td><strong>21.45 W/mÂ²</strong></td><td>35.17 W/mÂ² (ItaliaMeteo)</td><td style="color:#28a745">+39.0%</td></tr>
    </table>

    <div class="note">
        <strong>Padavine su jedini parametar gdje XGBoost ne poboljÅ¡ava najbolji model</strong> (-6%). Ovo je oÄekivano: precipitacija je inherentno najteÅ¾a varijabla u meteorologiji â€” stochastiÄka, lokalizovana i binarnog karaktera (pada/ne pada). Ensemble prosjek je veÄ‡ optimalan za ovaj tip varijable.
    </div>

    <div class="note">
        <strong>KljuÄna razlika od naivnog modela:</strong> Ovaj model NE koristi lag feature-e opservacija (temperatura prije 1h, 6h...) niti rolling error statistike â€” jer u realnom vremenu nemamo buduÄ‡a mjerenja. Umjesto toga, oslanja se na: ensemble statistike <strong>8 modela</strong> (prosjek, std, raspon, medijana), cikliÄne vremenske varijable, cross-parameter interakcije (npr. razlika temp/taÄke rose), <strong>tabele istorijskog biasa</strong>, i <strong>revizije prognoza (Day1/Day2)</strong> â€” koliko se danaÅ¡nja prognoza promijenila u odnosu na juÄeraÅ¡nju i prekjuÄeraÅ¡nju. Model koristi 1,006 feature-a ukupno.
    </div>

    <h3>Pametna korekcija vremenskog koda (âœ¨ novo)</h3>

    <p>Jedan od najveÄ‡ih problema sa sirovim prognozama je <strong>laÅ¾no prijavljivanje kiÅ¡e</strong>. Tokom zime, modeli Äesto prijavljuju kiÅ¡u (weather code â‰¥ 51) kada je zapravo samo oblaÄno â€” visoka vlaÅ¾nost, nizak pritisak i gusti oblaci stvaraju uslove koje modeli interpretiraju kao padavine, ali kiÅ¡a zapravo ne pada.</p>

    <p>RjeÅ¡enje: umjesto da koristimo sirove weather code-ove iz modela (koji su obiÄno moda svih 8 modela), <strong>weather code se sada odreÄ‘uje na osnovu XGBoost-korigovanih padavina i oblaÄnosti</strong>. Logika:</p>

    <ul>
        <li>Ako XGBoost kaÅ¾e padavine &lt; 0.1mm ali modeli kaÅ¾u kiÅ¡a â†’ <strong>smanji na oblaÄno</strong> (code 3) umjesto kiÅ¡e</li>
        <li>Ako XGBoost kaÅ¾e padavine &gt; 0.5mm ali modeli kaÅ¾u vedro â†’ <strong>poveÄ‡aj na kiÅ¡u</strong></li>
        <li>OblaÄnost iz XGBoost-a odreÄ‘uje taÄan stepen oblaÄnosti (vedro/djelimiÄno/oblaÄno)</li>
        <li>Grmljavine (code â‰¥ 95) se ne diraju â€” to su ekstremni dogaÄ‘aji koje modeli pouzdano detektuju</li>
    </ul>

    <p>Ovo znaÄajno smanjuje sluÄajeve kad prognoza pokazuje kiÅ¡u a napolju je samo oblaÄno, posebno tokom zimskih mjeseci na primorju.</p>

    <h3>Verifikacija: koliko taÄno modeli detektuju kiÅ¡u?</h3>

    <p>Da bismo razumjeli zaÅ¡to je korekcija vremenskog koda vaÅ¾na, pogledajmo kako sirovi modeli detektuju kiÅ¡u. Poredimo model weather code (â‰¥51 = "kiÅ¡a") sa stvarnim mjerenjima precipitacije (>0.1 mm/h = pada kiÅ¡a):</p>

    <table>
        <tr><th>Model</th><th>TaÄnost</th><th>LaÅ¾na kiÅ¡a (FAR)</th><th>Detekcija kiÅ¡e</th><th>F1 Score</th></tr>
        <tr><td>GFS Seamless</td><td>86.6%</td><td style="color:#d73a49"><strong>59.3%</strong></td><td>87.6%</td><td>0.556</td></tr>
        <tr><td>UKMO Seamless</td><td>86.6%</td><td style="color:#d73a49">41.4%</td><td>80.3%</td><td>0.678</td></tr>
        <tr><td>ECMWF IFS025</td><td>76.1%</td><td>31.0%</td><td><strong>94.8%</strong></td><td>0.798</td></tr>
        <tr><td>ICON Seamless</td><td>79.7%</td><td>28.6%</td><td>76.3%</td><td>0.738</td></tr>
        <tr><td>MeteoFrance</td><td>79.6%</td><td>31.6%</td><td>81.7%</td><td>0.744</td></tr>
        <tr><td>ARPEGE Europe</td><td>79.6%</td><td>31.7%</td><td>81.6%</td><td>0.744</td></tr>
        <tr style="background:#f0f9ff;"><td><strong>BOM ACCESS</strong></td><td>85.1%</td><td style="color:#28a745"><strong>3.6%</strong></td><td>86.9%</td><td><strong>0.914</strong></td></tr>
    </table>

    <p>KljuÄni nalaz: <strong>GFS prijavljuje laÅ¾nu kiÅ¡u u 59% sluÄajeva!</strong> Kad GFS kaÅ¾e "kiÅ¡a", u ~6 od 10 sluÄajeva zapravo ne pada. ECMWF ima najbolju detekciju (94.8% stvarne kiÅ¡e uhvati), ali i dalje 31% laÅ¾nih alarma. BOM ACCESS je izuzetan â€” samo 3.6% laÅ¾nih alarma uz visoku detekciju.</p>

    <p><strong>Procijenjeno poboljÅ¡anje sa korekcijom:</strong> Algoritmom <code>correct_weather_code_row()</code> koji koristi XGBoost padavine i oblaÄnost, procjenjujemo da se eliminiÅ¡e ~60% laÅ¾nih kiÅ¡a. Na primjer:</p>

    <table>
        <tr><th>Model</th><th>FAR (originalno)</th><th>FAR (korigovano)</th><th>TaÄnost (orig.)</th><th>TaÄnost (korr.)</th></tr>
        <tr><td>GFS Seamless</td><td style="color:#d73a49">59.3%</td><td style="color:#28a745">36.8%</td><td>86.6%</td><td><strong>93.9%</strong></td></tr>
        <tr><td>UKMO Seamless</td><td style="color:#d73a49">41.4%</td><td style="color:#28a745">22.0%</td><td>86.6%</td><td><strong>92.6%</strong></td></tr>
        <tr><td>ECMWF IFS025</td><td>31.0%</td><td style="color:#28a745">15.2%</td><td>76.1%</td><td><strong>88.9%</strong></td></tr>
        <tr><td>MeteoFrance</td><td>31.6%</td><td style="color:#28a745">15.6%</td><td>79.6%</td><td><strong>87.9%</strong></td></tr>
    </table>

    <div class="note">
        <strong>Procjena je konzervativna</strong> (60% eliminacija false alarms). U praksi, XGBoost precipitation MAE je 1.6mm, Å¡to znaÄi da pouzdano razlikuje "stvarno pada" od "ne pada". Rezultat: taÄnost vremenskog koda skaÄe sa ~80% na ~88-94%.
    </div>

    <h3>OblaÄnost â€” skriveni izazov</h3>

    <p>Weather Underground stanica ne mjeri oblaÄnost direktno, pa koristimo <strong>solarnu radijaciju kao proxy</strong>: ako je jaka radijacija â†’ vedro, slaba â†’ oblaÄno. Poredimo to sa model cloud cover-om (dnevni sati, 08-17h):</p>

    <table>
        <tr><th>Model</th><th>Cloud Cover MAE</th><th>Bias</th><th>Slaganje sa solarnim proxy</th></tr>
        <tr><td>ItaliaMeteo ICON2I</td><td>31.5%</td><td>-12.0%</td><td>50.6%</td></tr>
        <tr><td>ICON Seamless</td><td>32.2%</td><td>-6.0%</td><td>42.2%</td></tr>
        <tr><td>MeteoFrance</td><td>32.9%</td><td>-14.3%</td><td>47.4%</td></tr>
        <tr><td>ECMWF IFS025</td><td>33.8%</td><td>-27.3%</td><td>54.3%</td></tr>
        <tr><td>BOM ACCESS</td><td>34.3%</td><td>-10.3%</td><td>47.2%</td></tr>
        <tr><td>UKMO Seamless</td><td>34.5%</td><td>-15.7%</td><td>48.1%</td></tr>
        <tr><td>GFS Seamless</td><td>35.9%</td><td>-13.1%</td><td>48.7%</td></tr>
    </table>

    <p>OblaÄnost je <strong>najteÅ¾a varijabla za prognoziranje</strong> â€” MAE od ~32-36% znaÄi da prognoze oblaÄnosti u prosjeku promaÅ¡uju za treÄ‡inu neba. Svi modeli pokazuju negativan bias (podcjenjuju oblaÄnost). Upravo zato je XGBoost korekcija oblaÄnosti toliko vrijedna â€” smanjuje greÅ¡ku sa ~32% na <strong>9.75%</strong>, poboljÅ¡anje od 64%.</p>

    <h3>Degradacija greÅ¡ke po forecast horizontu (âœ¨ real data)</h3>

    <p>KoristeÄ‡i <strong>Open-Meteo Previous Runs API</strong>, preuzeli smo Day0 (najnoviji run), Day1 (juÄeraÅ¡nji run) i Day2 (prekjuÄeraÅ¡nji run) za 7 modela od januara 2024. Ovo daje <strong>preciznu sliku koliko prognoza degradira sa svakim danom</strong>:</p>

    <table>
        <tr><th>Varijabla</th><th>Day0 MAE</th><th>Day1 MAE</th><th>Day2 MAE</th><th>Degradacija</th></tr>
        <tr><td>Temperatura</td><td>1.685Â°C</td><td>1.769Â°C</td><td>1.812Â°C</td><td style="color:#d73a49">+7.5%</td></tr>
        <tr><td>TaÄka rose</td><td>2.122Â°C</td><td>2.113Â°C</td><td>2.181Â°C</td><td style="color:#d73a49">+2.8%</td></tr>
        <tr><td>Brzina vjetra</td><td>1.215 m/s</td><td>1.194 m/s</td><td>1.196 m/s</td><td style="color:#28a745">-1.6%</td></tr>
        <tr><td>Pritisak</td><td>1.045 hPa</td><td>1.027 hPa</td><td>1.029 hPa</td><td style="color:#28a745">-1.6%</td></tr>
        <tr><td>Padavine</td><td>2.622 mm</td><td>2.505 mm</td><td>2.589 mm</td><td style="color:#28a745">-1.3%</td></tr>
    </table>

    <p><strong>Temperatura degradira najjasnije</strong> â€” Day2 prognoza je 7.5% loÅ¡ija od Day0. Za padavine i pritisak, Day1 Äak blago poboljÅ¡ava rezultat (Å¡um u podacima ili model bias korekcija). Ovo potvrÄ‘uje da je temperatura varijabla gdje "svjeÅ¾ina" prognoze najviÅ¡e utiÄe.</p>

    <h4>Forecast Revision Features u XGBoostu</h4>

    <p>Razlika izmeÄ‘u danaÅ¡nje i juÄeraÅ¡nje prognoze (<strong>revision</strong>) je signal â€” ako se svi modeli slaÅ¾u da je danas toplije nego Å¡to su mislili juÄe, to nosi informaciju. Implementirali smo ~100 novih feature-a bazirano na Previous Runs:</p>

    <ul>
        <li><strong>Per-model Day1/Day2 prognoze</strong> â€” za svaki od 7 modela, za 8 varijabli</li>
        <li><strong>Revision (Day0 - Day1)</strong> â€” koliko se svaki model korigirao u zadnja 24h</li>
        <li><strong>Day1-to-Day2 revision</strong> â€” trend korekcija (da li se modeli konvergiraju?)</li>
        <li><strong>Ensemble statistike revizija</strong> â€” prosjek, std, abs_mean revizija svih modela</li>
        <li><strong>Day0 vs Day1 ensemble spread</strong> â€” koliko se ansambl pomaknuo</li>
    </ul>

    <p>Ukupan broj feature-a u XGBoost modelu: <strong>1,006</strong> (sa ~100 novih od Previous Runs). Model automatski uÄi koje revizije nose signal, a koje su Å¡um â€” na trening podacima od januara 2024. Redovi prije tog perioda (2020-2023) imaju NaN za ove feature-e, Å¡to XGBoost korektno tretira.</p>

    <div class="note">
        <strong>Izvor:</strong> <code>previous-runs-api.open-meteo.com</code> â€” API koji eksponira prognoze iz prethodnih model runova. U produkciji, pipeline automatski preuzima Day1/Day2 podatke za svaki model pri svakom pokretanju.
    </div>

    <h2>Limitacije pristupa</h2>

    <p>VaÅ¾no je razumjeti Å¡ta ovaj sistem <strong>moÅ¾e</strong>, a Å¡ta <strong>ne moÅ¾e</strong>. XGBoost korekcija znaÄajno poboljÅ¡ava prosjeÄnu taÄnost â€” ali bez prisustva <em>tehniÄki novog vremenskog modela</em>, postoje fundamentalna ograniÄenja.</p>

    <p><strong>Konvektivne padavine i mini pljuskovi.</strong> Kratkotrajne oluje, iznenadni pljuskovi i lokalne konvektivne Ä‡elije su najteÅ¾i problem. Ovi dogaÄ‘aji se deÅ¡avaju na prostornoj skali od nekoliko kilometara i vremenskoj skali od 15-30 minuta. Globalni modeli koje koristimo (ARPÃˆGE ~10km, GFS ~25km, ICON ~13km, MÃ©tÃ©o-France ~10km) jednostavno nemaju dovoljnu rezoluciju da ih uhvate. XGBoost moÅ¾e nauÄiti da prepozna uslove koji favorizuju konvekciju, ali ne moÅ¾e predvidjeti taÄnu lokaciju i tajming pljuska â€” jer ni input modeli to ne vide.</p>

    <p><strong>Rezolucija za Crnu Goru.</strong> Budva leÅ¾i na obali, sa planinama od 1000+ metara na samo nekoliko kilometara od mora. Ova izuzetna orografska kompleksnost zahtijeva rezoluciju od 2km ili manje da bi se adekvatno modelirali lokalni efekti. Nijedan od globalnih modela koje koristimo nema takvu rezoluciju za ovo podruÄje. Ovo vaÅ¾i generalno za Äitavu Crnu Goru, Äija izrazito kompleksna topografija predstavlja poseban izazov za numeriÄke prognoze.</p>

    <p><strong>Ensemble â‰  novi model.</strong> Moj pristup koristi ansambl postojeÄ‡ih modela â€” ali 8 modela koji svi grijeÅ¡e na sliÄan naÄin neÄ‡e magiÄno dati taÄan odgovor. Ansambl smanjuje sluÄajnu greÅ¡ku, ali ne moÅ¾e kompenzovati sistematski nedostatak rezolucije. Za zaista novi kvalitet prognoze za Budvu, bio bi potreban high-resolution LAM (Limited Area Model) na ~1km gridu, poput AROME ili ICON-D2 kalibrisan za Jadransku obalu.</p>

    <div class="note">
        <strong>Ukratko:</strong> Ovaj sistem daje najbolju moguÄ‡u korekciju postojeÄ‡ih globalnih prognoza â€” ali ne zamjenjuje potrebu za visoko-rezolutivnim regionalnim modelima. NajveÄ‡a poboljÅ¡anja su na "glatkim" varijablama (temperatura, pritisak, vlaÅ¾nost), dok padavine i lokalni vjetrovi ostaju fundamentalno limitirani ulaznom rezolucijom.
    </div>

    <h2>Ukupno rangiranje</h2>

    <p>Na osnovu svih analiziranih parametara, evo ukupnog rangiranja modela za Budvu:</p>

    <img src="images/13_overall_ranking.png" alt="Ukupno rangiranje modela">

    <h2>TehniÄki detalji</h2>

    <p>Cijeli projekat je napisan u Pythonu. Koristim <code>pandas</code> i <code>numpy</code> za obradu podataka, <code>matplotlib</code> i <code>seaborn</code> za vizualizacije, i <code>xgboost</code> za maÅ¡insko uÄenje.</p>

    <p>Podatke preuzimam sa Open-Meteo API-ja, koji besplatno daje pristup istorijskim prognozama globalnih modela. Imam implementiran retry mehanizam jer postoje rate limiti.</p>

    <div class="note">
        <strong>Napomena:</strong> Kod projekta Ä‡e uskoro biti potpuno open source i dostupan na GitHubu. UkljuÄivaÄ‡e kompletan proces preuzimanja podataka, analizu, vizualizaciju i pripremu za ML model. Ovo Ä‡e omoguÄ‡iti svima da repliciraju analizu, treniraju vlastite modele, ili primjene sliÄan pristup na druge lokacije osim Budve.
    </div>

    <h2>ZaÅ¡to sam zainteresovan za ovo</h2>

    <p>Å½ivim u Budvi. Budem nekad isfrustriran taÄnoÅ¡Ä‡u vremenskih prognoza. </p>

    <p>Ali isto tako, ovo je fascinantan problem iz perspektive data science-a. Globalni modeli su nevjerovatno zanimljivi - simuliraju cijelu atmosferu koristeÄ‡i fiziÄke jednaÄine. Ali oni ne mogu biti perfektni za svaku pojedinaÄnu lokaciju. Tu dolazi maÅ¡insko uÄenje - moÅ¾e nauÄiti lokalne obrasce bez potrebe da eksplicitno modelira fiziku. A dok se ne razviju lokalni ali i pouzdani modeli, ovo je koristan pristup.</p>

    <h2>TaÄnost XGBoost sistema</h2>

    <p>Na osnovu validacionog seta (jul 2025 â€” januar 2026), XGBoost korekcija postiÅ¾e sljedeÄ‡u taÄnost u odnosu na mjerenja Weather Underground stanice:</p>

    <div id="liveAccuracy">
        <p style="color:#586069;font-size:15px;">UÄitavanje podataka o taÄnosti...</p>
    </div>

    <script>
    (async () => {
        const paths = ['forecast_data/forecast_48h.json', '../forecast_output/forecast_48h.json'];
        let data = null;
        for (const p of paths) {
            try { const r = await fetch(p); if (r.ok) { data = await r.json(); break; } } catch(e) {}
        }
        if (!data || !data.training_metrics) {
            document.getElementById('liveAccuracy').innerHTML =
                '<p style="color:#586069;font-size:14px;">Podaci o taÄnosti su dostupni na <a href="forecast.html">stranici za prognozu</a>.</p>';
            return;
        }
        const m = data.training_metrics;
        const keys = ['temperature_2m','dew_point_2m','relative_humidity_2m','wind_speed_10m','wind_gusts_10m','pressure_msl','cloud_cover','precipitation'];
        const colors = {temperature_2m:'#d73a49',dew_point_2m:'#e36209',relative_humidity_2m:'#6f42c1',wind_speed_10m:'#0366d6',wind_gusts_10m:'#0366d6',pressure_msl:'#28a745',cloud_cover:'#586069',precipitation:'#0366d6'};
        const labels = {temperature_2m:'Temperatura',dew_point_2m:'TaÄka rose',relative_humidity_2m:'VlaÅ¾nost',wind_speed_10m:'Vjetar',wind_gusts_10m:'Udari vjetra',pressure_msl:'Pritisak',cloud_cover:'OblaÄnost',precipitation:'Padavine'};

        let cards = '';
        keys.forEach(k => {
            if (!m[k]) return;
            cards += '<div style="background:#f6f8fa;border:1px solid #e1e4e8;border-radius:10px;padding:16px;text-align:center">'
                + '<div style="font-size:11px;color:#586069;text-transform:uppercase;letter-spacing:0.5px">' + labels[k] + '</div>'
                + '<div style="font-size:24px;font-weight:700;margin:6px 0;color:' + colors[k] + '">' + m[k].mae + ' <span style="font-size:14px;font-weight:500">' + m[k].unit + '</span></div>'
                + '<div style="font-size:12px;color:#959da5;margin-bottom:4px">prosjeÄna greÅ¡ka (MAE)</div>'
                + '<div style="font-size:12px;color:#28a745;font-weight:600">â†‘ ' + m[k].improvement + '% bolje od najboljeg modela</div></div>';
        });

        document.getElementById('liveAccuracy').innerHTML =
            '<div style="text-align:center;margin-bottom:24px">'
            + '<div style="font-size:18px;color:#24292e;font-weight:600">ProsjeÄna greÅ¡ka po parametru (MAE)</div>'
            + '<div style="font-size:14px;color:#586069;margin-top:4px">NiÅ¾a vrijednost = preciznija prognoza</div></div>'
            + '<div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:12px;margin-bottom:16px">' + cards + '</div>'
            + '<p style="font-size:14px;color:#586069">Generisano: ' + new Date(data.generated).toLocaleDateString('sr-Latn') + ' Â· ' + data.models.length + ' modela Â· 6 godina podataka (2020â€”2026)</p>';
    })();
    </script>

    <h2>Å ta dalje</h2>

    <p>Produkcijska verzija je zavrÅ¡ena. MoÅ¾ete posjetiti <strong><a href="forecast.html">stranicu sa Å¾ivom prognozom</a></strong>.</p>

    <ol>
        <li>Preuzima live prognoze sa Open-Meteo API za svih <strong>8 modela</strong> (ARPÃˆGE, GFS, ICON, MÃ©tÃ©o-France, ECMWF IFS, ItaliaMeteo, <strong>UKMO</strong>, <strong>BOM ACCESS</strong>)</li>
        <li>Primjenjuje trenirane XGBoost modele na <strong>svih 9 parametara</strong> â€” ukljuÄujuÄ‡i oblaÄnost, padavine i solarnu radijaciju</li>
        <li>Koristi tabele istorijskog biasa (po mjesecu i satu) kao dodatne feature-e za preciznije korekcije</li>
        <li><strong>Pametna korekcija vremenskog koda</strong> â€” koristi XGBoost padavine i oblaÄnost da ispravi laÅ¾ne prijave kiÅ¡e</li>
        <li>GeneriÅ¡e korigovanu +48h prognozu sa interaktivnim web prikazom</li>
    </ol>

    <p>Model je treniran na <strong>6 godina podataka</strong> (april 2020. â€” danas) sa 50.000+ satnih taÄaka, spojenih iz dva izvora opservacija. Sa 8 modela u ansamblu i pametnom korekcijom vremenskog koda, ovo je znaÄajan korak naprijed u odnosu na prethodnu verziju. Svako mjeseÄno aÅ¾uriranje sa novim podacima donosi marginalna poboljÅ¡anja (&lt;1% MAE) s obzirom na veÄ‡ veliku koliÄinu trening podataka.</p>

    <p>Linkove koriÅ¡Ä‡enih podataka moÅ¾ete vidjeti na stranici za live prognozu.</p>

    <p>Ako imate pitanja ili prijedloge, slobodno mi piÅ¡ite na <a href="mailto:ivanovicmatija2007@gmail.com">ivanovicmatija2007@gmail.com</a>.</p>
</body>
</html>
